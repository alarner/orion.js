module.exports = function(e, res) {
	var lines = e.stack.split("\n");
	var error = lines.splice(0, 1)[0];
	var regex = /at (.*?) \((.*?)\:([0-9]+)\:([0-9]+)\)/;
	res.writeHead(500, {"Content-Type": "text/html"});
	res.write("<html>");
	res.write("<head>");
	res.write("<style type=\"text/css\">");
	res.write("#main {");
	res.write("	width: 815px;");
	res.write("	margin: 30px auto;");
	res.write("}");
	res.write("h1 {");
	res.write("	border-collapse: collapse;");
	res.write("	box-sizing: border-box;");
	res.write("	color: rgb(51, 51, 51);");
	res.write("	display: block;");
	res.write("	font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;");
	res.write("	font-size: 36px;");
	res.write("	font-weight: 500;");
	res.write("	line-height: 39px;");
	res.write("	margin-bottom: 8px;");
	res.write("	margin-left: 37px;");
	res.write("	margin-right: 0px;");
	res.write("	margin-top: 0px;");
	res.write("}");
	res.write("table {");
	res.write("	background-color: transparent;");
	res.write("	border-collapse: collapse;");
	res.write("	border-spacing: 0;");
	res.write("	margin: 0 auto;");
	res.write("}");
	res.write("tr {");
	res.write("	display: table-row;");
	res.write("	vertical-align: inherit;");
	res.write("	border-color: inherit;");
	res.write("}");
	res.write("th {");
	res.write("	text-align: left;");
	res.write("}");
	res.write("table thead > tr > th {");
	res.write("	padding: 8px;");
	res.write("	line-height: 1.428571429;");
	res.write("	vertical-align: top;");
	res.write("	border-top: 1px solid #dddddd;");
	res.write("}");
	res.write("table thead:first-child tr:first-child th {");
	res.write("	border-top: 0;");
	res.write("}");
	res.write("table thead > tr > th {");
	res.write("	padding: 5px;");
	res.write("}");
	res.write("table thead > tr > th {");
	res.write("	vertical-align: bottom;");
	res.write("	border-bottom: 2px solid #dddddd;");
	res.write("}");
	res.write("tbody {");
	res.write("	display: table-row-group;");
	res.write("	vertical-align: middle;");
	res.write("	border-color: inherit;");
	res.write("}");
	res.write("table tbody > tr > td {");
	res.write("	padding: 5px;");
	res.write("	line-height: 1.428571429;");
	res.write("	vertical-align: top;");
	res.write("	border-top: 1px solid #dddddd;");
	res.write("	display: table-cell;");
	res.write("}");
	res.write("</style>");
	res.write("</head>");
	res.write("<body>");
	res.write("<div id=\"main\">");
	res.write("<h1>"+error+"</h1>");
	res.write("<table>");
	res.write("<thead>");
	res.write("<tr>");
	res.write("<th>#</th><th>File</th><th>Function</th>");
	res.write("</tr>");
	res.write("</thead>");
	res.write("<tbody>");
	for(var i=0; i<lines.length; i++) {
		var match = regex.exec(lines[i]);
		res.write("<tr><td>"+match[3]+"</td><td>"+match[2]+"</td><td>"+match[1]+"</td></tr>");
	}
	res.write("</tbody>");
	res.write("</div>");
	res.write("</body>");
	res.write("</html>");
	res.end();
}